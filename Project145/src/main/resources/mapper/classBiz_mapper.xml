<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.pj.vegi.biz.mapper.ClassBizMapper">

	<select id="classBizList" resultType="LessonVO">
		SELECT * FROM class
		WHERE
		m_id=#{mId}

	</select>


	<delete id="classBizDelete">
		DELETE FROM class
		WHERE c_id=#{cId}
	</delete>



	<update id="classBizUpdate">
		UPDATE class
		SET rest_address = #{restAddress},
		rest_time=#{restTime},
		rest_tel=#{restTel},
		rest_pic=#{restPic}
		WHERE
		rest_id=#{restId}
	</update>

	<select id="classBizNum" resultType="MemberVo">
		SELECT bizNum FROM member
		WHERE m_id=#{mId}
	</select>


	<insert id="classBizInsert">
		<selectKey keyProperty="cId" resultType="String"
			order="AFTER">
			SELECT
			c_seq.currval
			FROM DUAL
		</selectKey>
		INSERT INTO class(
		C_ID, C_TITLE,C_IMG,C_DESC,VEGTYPE,C_PRICE,C_START,
		C_END,STATUS,CURRICULUM,
		M_ID,C_PARTI,C_LOC,BIZNUM,C_TIME,Lec_PROPOSAL, LEC_RESPONSE, LEC_ID
		)
		VALUES(
		'class'||c_seq.nextval,#{cTitle},#{cImg},#{cDesc},#{vegType},#{cPrice},#{cStart},
		#{cEnd},#{status},#{curriCulum},
		#{mId},#{cParti},#{cLoc},#{bizNum},#{cTime},#{lecProposal},#{lecResponse},
		#{lecId}
		)

	</insert>

	<select id="classBizSelect" resultType="LessonVo">
		SELECT * FROM class
		WHERE
		c_id=#{cId}
	</select>

<<<<<<< HEAD
	
=======
	<select id="lecBizSelect" resultType="LecturerVo">
		SELECT * FROM Member
		WHERE
		c_id=#{cId}
	</select>
>>>>>>> branch 'main' of https://github.com/helly128/Project145.git
	
	<update id="myCareerUpdate">
		UPDATE member
		set career = #{career}
		WHERE
		m_id=#{mId}
	</update>
	
	<update id="applyCollabo">
		UPDATE class
		set lec_proposal = #{lecProposal}
		WHERE
		c_id=#{cId}
	</update>
	
	<select id="getLecList" resultType="MemberVo">
		
		SELECT M_ID, M_NAME,PROFILE_IMAGE,INSTA,CAREER
		FROM member
		WHERE M_ID in 
		(SELECT LEC_ID FROM ClASS WHERE BIZNUM = #{bizNum})

	</select>
</mapper>